<!-- Lot edit form partial -->
<div class="bg-white rounded-lg shadow-lg border p-6 max-w-2xl mx-auto">
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-gray-900">Edit Lot: {{ lot.name }}</h2>
    <button onclick="document.getElementById('edit-modal').classList.add('hidden')"
            class="text-gray-400 hover:text-gray-600">
      <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>

  <form hx-put="/api/lots/{{ lot.id }}"
        hx-target="#main-content"
        hx-swap="innerHTML"
        class="space-y-6">
    
    <!-- Lot Name -->
    <div>
      <label for="lot_name" class="block text-sm font-medium text-gray-700 mb-2">
        Lot Name
      </label>
      <input type="text"
             id="lot_name"
             name="name"
             value="{{ lot.name }}"
             required
             class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
    </div>

    <!-- Strategy -->
    <div>
      <label for="strategy" class="block text-sm font-medium text-gray-700 mb-2">
        Strategy
      </label>
      <select id="strategy"
              name="strategy"
              required
              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
        <option value="author" {% if lot.strategy == 'author' %}selected{% endif %}>Author</option>
        <option value="series" {% if lot.strategy == 'series' %}selected{% endif %}>Series</option>
        <option value="genre" {% if lot.strategy == 'genre' %}selected{% endif %}>Genre</option>
        <option value="mixed" {% if lot.strategy == 'mixed' %}selected{% endif %}>Mixed</option>
      </select>
    </div>

    <!-- Estimated Value -->
    <div>
      <label for="estimated_value" class="block text-sm font-medium text-gray-700 mb-2">
        Estimated Value
      </label>
      <div class="relative">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
          <span class="text-gray-500 sm:text-sm">$</span>
        </div>
        <input type="number"
               id="estimated_value"
               name="estimated_value"
               value="{{ lot.estimated_value or '' }}"
               step="0.01"
               min="0"
               class="w-full pl-7 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
      </div>
    </div>

    <!-- Probability Score -->
    <div>
      <label for="probability_score" class="block text-sm font-medium text-gray-700 mb-2">
        Probability Score (0-1)
      </label>
      <input type="number"
             id="probability_score"
             name="probability_score"
             value="{{ lot.probability_score or '' }}"
             step="0.01"
             min="0"
             max="1"
             class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
    </div>

    <!-- Probability Label -->
    <div>
      <label for="probability_label" class="block text-sm font-medium text-gray-700 mb-2">
        Probability Label
      </label>
      <select id="probability_label"
              name="probability_label"
              class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
        <option value="Excellent" {% if lot.probability_label == 'Excellent' %}selected{% endif %}>Excellent</option>
        <option value="Good" {% if lot.probability_label == 'Good' %}selected{% endif %}>Good</option>
        <option value="Fair" {% if lot.probability_label == 'Fair' %}selected{% endif %}>Fair</option>
        <option value="Poor" {% if lot.probability_label == 'Poor' %}selected{% endif %}>Poor</option>
        <option value="Unknown" {% if lot.probability_label == 'Unknown' %}selected{% endif %}>Unknown</option>
      </select>
    </div>

    <!-- Sell Through Rate -->
    <div>
      <label for="sell_through" class="block text-sm font-medium text-gray-700 mb-2">
        Sell-Through Rate (0-1)
      </label>
      <input type="number"
             id="sell_through"
             name="sell_through"
             value="{{ lot.sell_through or '' }}"
             step="0.01"
             min="0"
             max="1"
             class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">
    </div>

    <!-- Justification -->
    <div>
      <label for="justification" class="block text-sm font-medium text-gray-700 mb-2">
        Justification
      </label>
      <textarea id="justification"
                name="justification"
                rows="4"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500">{% if lot.justification %}{{ lot.justification | join('\n') }}{% endif %}</textarea>
      <p class="mt-1 text-sm text-gray-500">Enter each justification point on a new line.</p>
    </div>

    <!-- Form Actions -->
    <div class="flex gap-3 pt-6 border-t border-gray-200">
      <button type="submit"
              class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-colors">
        Save Changes
      </button>
      <button type="button"
              onclick="document.getElementById('edit-modal').classList.add('hidden')"
              class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors">
        Cancel
      </button>
    </div>
  </form>
</div>

