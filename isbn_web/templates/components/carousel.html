<!-- Three.js Carousel for book lots -->
<script id="carousel-books-data" type="application/json">
{{ books | tojson | safe }}
</script>

<div id="carousel-container"
     class="absolute inset-0 bg-gradient-to-b from-gray-50 to-gray-100"
     x-data="threeCarousel()"
     x-init="$nextTick(() => setTimeout(() => init(), 5))"
     @destroy.window="destroy()"
     @htmx:before-swap.window="destroy()">

  <!-- Three.js Canvas -->
  <canvas id="carousel-canvas" class="w-full h-full"></canvas>

  <!-- Navigation arrows -->
  <button @click="rotate(-1)"
          class="absolute left-4 top-1/2 -translate-y-1/2 z-50 bg-white/80 hover:bg-white text-gray-700 hover:text-gray-900 p-3 rounded-full shadow-lg transition-all duration-200 opacity-70 hover:opacity-100">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
  </button>

  <button @click="rotate(1)"
          class="absolute right-4 top-1/2 -translate-y-1/2 z-50 bg-white/80 hover:bg-white text-gray-700 hover:text-gray-900 p-3 rounded-full shadow-lg transition-all duration-200 opacity-70 hover:opacity-100">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </button>
</div>
